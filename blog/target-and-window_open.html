<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" href="../stylesheets/stylesheet.css" media="screen" />
<link rel="stylesheet" type="text/css" href="../stylesheets/pygment_trac.css" media="screen" />
<link rel="stylesheet" type="text/css" href="../stylesheets/print.css" media="print" />
<link rel="stylesheet" type="text/css" href="../stylesheets/markdown.css" media="screen" />

<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<title>链接跳转到指定窗口 —— Tomi-Eric's Blog</title>
<meta name="description" content="分享园本博客主要记录平时关注的前端技术，同时会分享一些前端技术。" />
<meta name="keywords" content="分享园，前端技术分析，jquery插件" />
<base href=".">
</head>
<body>
<header>
      <div class="inner">
        <h1>Tomi-Eric's Blog</h1>
        <h2>focus in F2E</h2>
        <a href="https://github.com/tomieric" class="button"><small>Follow me on</small>GitHub</a>
      </div>
    </header>
<div id="content-wrapper">
<div class="inner">
<h2>链接跳转到指定窗口</h2>
<p>有时候我们需要节省带宽，减少站内多开窗口加载内容。</p>
<p>比如公司的产品“在线教室”，用户在点击多个教室链接时，原方法按照产品部要求是全部新开窗口。</p>
<p>由于在线教室需要flash媒体流长连接，还有就是基于node+sokect.io的在线聊天，会造成服务器过大的压力。</p>
<hr>
<p><strong>相似案例分析</strong></p>
<p>优酷网的视频播放，比如我们在优酷的首页，你随便点视频播放，可以看到浏览器只开了一个窗口，并且在我们点击第二个视频的时候，会将第一个视频的页面给覆盖掉。我们想多开播放页面只能通过右键打开链接， 这样可以节省大部分带宽和连接数，大大减轻服务器的压力。</p>
<hr>
<p>通过案例分析可以得到我们想要的。</p>
<p>下面说说实现的两种方法：</p>
<p><strong>1.JavaScript window.open</strong></p>
<p>window.open是我们最开始使用的方法，也是现在还保留的方法。参考<a href="http://www.w3school.com.cn/htmldom/met_win_open.asp">w3cschool</a></p>
<pre><code>window.open(URL,name,features,replace)
</code></pre>

<p>我们通过传入连接的url，和name（类似ID标识）， 定义一个全局变量获取window.open的句柄，然后我们可以对变量的opened属性进行判断。</p>
<pre><code>var ROOMWIN;
function intoRoom(url){
        if(!ROOMWIN || ROOMWIN.closed){
            ROOMWIN=window.open(a,"ROOMWIN")
        }else{
            ROOMWIN.location=url;
            ROOMWIN.focus();  // 优点
        }
}
</code></pre>

<p><em>优点：</em> 是我们通过句柄得到新开窗口的window对象，通过focus让其自动聚焦，减少用户自己切换窗口，提高用户体验性。</p>
<p><strong>2.html a标签的target属性</strong></p>
<p><strong>特殊的目标</strong></p>
<p>有 4 个保留的目标名称用作特殊的文档重定向操作：</p>
<p><strong>"_blank"</strong></p>
<p>浏览器总在一个新打开、未命名的窗口中载入目标文档。</p>
<p><strong>"_self"</strong></p>
<p>这个目标的值对所有没有指定目标的 <code>&lt;a&gt;</code> 标签是默认目标，它使得目标文档载入并显示在相同的框架或者窗口中作为源文档。这个目标是多余且不必要的，除非和文档标题 <!--<base>--><base href="."> 标签中的 target 属性一起使用。</p>
<p><strong>"_parent"</strong></p>
<p>这个目标使得文档载入父窗口或者包含来超链接引用的框架的框架集。如果这个引用是在窗口或者在顶级框架中，那么它与目标 _self 等效。</p>
<p><strong>"_top"</strong></p>
<p>这个目标使得文档载入包含这个超链接的窗口，用 _top 目标将会清除所有被包含的框架并将文档载入整个浏览器窗口。</p>
<p><strong>提示：</strong>这些 target 的所有 4 个值都以下划线开始。任何其他用一个下划线作为开头的窗口或者目标都会被浏览器忽略，因此，不要将下划线作为文档中定义的任何框架 name 或 id 的第一个字符。</p>
<h1>下面介绍我们的重点</h1>
<p><strong><em>framename</em></strong></p>
<pre><code>在指定的框架中打开被链接文档。
</code></pre>

<p>优势是不需要引入Javascript,做到<code>即插即用</code>。</p>
<pre><code>&lt;ul id="link"&gt;
    &lt;li&gt;
        &lt;a href="http://www.yiihuu.com/" target="classroom"&gt;翼虎网&lt;/a&gt;
    &lt;/li&gt;
    &lt;li&gt;
        &lt;a href="http://baidu.com" target="classroom"&gt;百度&lt;/a&gt;
    &lt;/li&gt;
    &lt;li&gt;
        &lt;a href="http://qq.com" target="classroom"&gt;qq&lt;/a&gt;
    &lt;/li&gt;
&lt;/ul&gt;
</code></pre>

<p>我们给target赋值<code>“classroom”</code>，在浏览器上面我们可以看到一样可以新开窗口，而且对于所有设置了<code>target="classroom"</code> 属性都是跳到同一窗口下。youku正是用了这种方法，在首页所有视频连接设置了<code>target="video"</code>属性。</p>
</div>
</div>
<div class="post">
    <div class="inner">
          <!-- UY BEGIN -->
            <div id="uyan_frame"></div>
            <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=894674"></script>
            <!-- UY END -->
    </div>
</div>
<footer class="footer">
    <div class="inner">
        <p>The MIT License (MIT)<br>
© Copyright (c) 2013 © <a href="http://www.fenxiangyuan.com">tomieric</a>. This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
    </div>
  </footer>
  <script src="javascripts/main.js"></script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27867252-2', 'tomieric.github.io');
  ga('send', 'pageview');

</script>  
<!-- This document was created with MarkdownPad, the Markdown editor for Windows (http://markdownpad.com) -->
</body>
</html>